\section{Base de datos}

\subsection{Estructura}

La figura \ref{fig:diagrama-e-r} representa el diagrama E-R de la base de datos
que ha sido diseñada para almacenar toda la información extraída mediante el
\textit{parser}. En ella se pueden ver en color naranja las entidades y en color
marrón las relaciones. En el siguiente apartado se
intentará explicar brevemente la utilidad de cada uno de estos elementos.

\begin{center}\begin{large}\underline{Entidades}\end{large}\end{center}

\begin{description}
\item [Word] 
Palabras encontradas (en su norma normalizada o en su forma natural).

\item [Document]
Documentos procesados, con su título (entidad débil, forma clave con
Collection).

\item [DocType]
Tipos de documentos posibles (hasta el momento TRAIN y TEST). 

\item [Collection]
Colecciones completas procesadas y el nombre del fichero donde se encontraba.

\item [Property]
Todos los tags posibles, a nivel de palabra, clausal, frasal o de relación
entre palabras.
	
\item [PropertyList]
Listas de elementos de tipo Property, para guardar los análisis a nivel frasal
y clausal.

\item [PropType]
Tipos de las propiedades (\begin{small}CLAUSE, WORD, PHRASE y
RELATIONSHIP\end{small}).
	
\item [Category]
Todas las categorías encontradas.

\end{description}

\begin{center}\begin{large}\underline{Relaciones}\end{large}\end{center}

La mayoría de relaciones son bastante obvias, con tan sólo echar un vistazo al
diagrama entidad-relación se puede entender su utilidad. Por esa razón en este
apartado sólo se van a comentar las dos que pueden resultar más complejas de
ver.

\begin{description}

\item [Parse tree]
Las n-uplas generadas por esta relación contendrán toda la información
referente a la estructura de las oraciones analizadas, es decir, las etiquetas
asignadas a nivel de palabra, a nivel frasal y a nivel clausal.

\item [Dependencies]
Esta relación está diseñada para guardar los datos relativos a una parte de la
información semántica extraída, en concreto las relaciones gramaticales entre
las palabras (en forma de dependencias entre ellas).

\end{description}

\begin{figure}[h]
\label{fig:diagrama-e-r}
\begin{center}
\includegraphics[angle=90,scale=0.425]{images/build/bdd-e-r.pdf}
\end{center}
\caption{Diagrama entidad-relación de la base de datos}
\end{figure}

\subsection{Generación de la base de datos}

MIEX es capaz de, mediante un fichero de texto con sentencias SQL, construir la
base de datos antes de empezar a procesar los ficheros de entrada (véase la
opción \textit{CreateDB} del fichero de configuración). 

En el directorio \url{share/sql} está situado el fichero de sentencias SQL
necesario para construir la base de datos que se comenta en esta sección, así
como para insertar una serie de datos estáticos necesarios.

\subsection{Normalización}

¿Elena? FIXME

\subsection{Vistas}

Como se puede figurar después de haber leído el primer capítulo, no es objetivo
del proyecto proporcionar un interfaz de consulta de la base de datos. De todos
modos, en el directorio \url{misc/query}, se pueden encontrar dos pequeños
scripts escritos en PHP\footnote{http://www.php.net} que contienen consultas de
ejemplo que pueden ser utilizadas como base bien para usuarios finales o bien
para futuras ampliaciones. Como breve explicación, el programa
\textit{query.php} muestra una visión general de la base de datos, mientras que
el script \textit{showcat.php} permite hacer una búsqueda por categoría.

Este par de herramientas han sido utilizadas fundamentalmente para hacer pruebas
de funcionamiento por lo que, además de no considerarse funcionalidades
oficiales del proyecto, \textbf{se distribuyen sin ninguna garantía
de funcionamiento}.

